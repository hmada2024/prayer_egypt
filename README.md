create_arabic_cities_db.py
هدف الكود:

هذا الكود مصمم لإنشاء قاعدة بيانات رقمية تحتوي على معلومات حول المدن والبلدات الموجودة في الدول العربية. الفكرة هي جمع إحداثيات هذه الأماكن (خطوط الطول والعرض) بالإضافة إلى معلومات أخرى مفيدة مثل المنطقة الزمنية واسم الدولة والمحافظة.

كيف يعمل الكود خطوة بخطوة:

تجهيز الأدوات: في البداية، يقوم الكود باستدعاء بعض "الأدوات" أو "المكتبات" البرمجية الجاهزة التي ستساعده في إنجاز المهمة. تخيل أنك تستدعي فنيين متخصصين للقيام بمهام محددة.

تحديد الدول العربية: يحدد الكود قائمة بأسماء الدول العربية التي سيتم البحث عن مدنها.

تحديد مكان التخزين: يحدد الكود اسم الملف الذي سيتم فيه حفظ قاعدة البيانات. يشبه هذا تحديد اسم الخزانة التي ستضع فيها المعلومات.

إنشاء الخزانة: يقوم الكود بإنشاء ملف قاعدة البيانات (الخزانة) إذا لم يكن موجودًا بالفعل.

تحديد شكل المعلومات: يحدد الكود كيف سيتم تنظيم المعلومات داخل قاعدة البيانات. سيتم إنشاء "جدول" باسم "cities" (المدن) وسيحتوي هذا الجدول على أعمدة لتخزين:

اسم المدينة باللغة العربية.

خط العرض.

خط الطول.

المنطقة الزمنية.

اسم الدولة باللغة العربية.

اسم المحافظة باللغة العربية.

أسماء بديلة للمدينة (مثل الاسم بالإنجليزية).

البحث عن المدن: يبدأ الكود بالمرور على كل دولة من الدول العربية الموجودة في القائمة.

الحصول على خريطة الدولة: بالنسبة لكل دولة، يستخدم الكود خدمة عبر الإنترنت للحصول على "خريطة" أو حدود تلك الدولة.

البحث عن المدن داخل الحدود: باستخدام خريطة الدولة، يبحث الكود عن جميع الأماكن المصنفة كـ "مدينة" أو "بلدة" داخل حدود تلك الدولة.

تسجيل معلومات المدينة: لكل مدينة يتم العثور عليها، يقوم الكود بما يلي:

الحصول على الاسم: يحاول الحصول على اسم المدينة باللغة العربية أولاً، وإذا لم يجده، يستخدم الاسم الموجود (قد يكون بالإنجليزية).

الحصول على الإحداثيات: يحصل على خط الطول والعرض للمدينة. إذا كانت المدينة ممثلة بمنطقة (مضلع على الخريطة)، فإنه يأخذ نقطة المنتصف لتحديد الإحداثيات.

تحديد المنطقة الزمنية: باستخدام الإحداثيات، يحدد الكود المنطقة الزمنية التي تقع فيها المدينة.

تحديد التقسيمات الإدارية: يحاول الكود تحديد اسم الدولة والمحافظة التي تنتمي إليها المدينة (إذا كانت هذه المعلومات متاحة).

تسجيل المعلومات في الخزانة: يقوم الكود بتسجيل كل هذه المعلومات (اسم المدينة، الإحداثيات، المنطقة الزمنية، الدولة، المحافظة، الأسماء البديلة) في الجدول الخاص بالمدن في قاعدة البيانات.

تكرار العملية: يكرر الكود هذه العملية لجميع الدول العربية الموجودة في القائمة.

حفظ الإنجاز وإغلاق الخزانة: بعد الانتهاء من جمع معلومات جميع المدن، يقوم الكود بحفظ جميع التغييرات التي أجراها في قاعدة البيانات ثم يغلق الاتصال بقاعدة البيانات.

إعلان النجاح: في النهاية، يخبرك الكود بأنه تم إنشاء قاعدة بيانات المدن العربية بنجاح.

المكتبات المستخدمة ودور كل مكتبة:

osmnx: هذه المكتبة هي أداة قوية للتفاعل مع بيانات الخرائط من موقع OpenStreetMap. في هذا الكود، تُستخدم osmnx بشكل أساسي لـ:

الحصول على حدود الدول العربية.

البحث عن الأماكن المصنفة كمدن وبلدات داخل حدود هذه الدول.

الحصول على الإحداثيات والمعلومات الأخرى المتعلقة بهذه الأماكن.

sqlite3: هذه المكتبة مدمجة في لغة بايثون وتوفر طريقة بسيطة لإنشاء وإدارة قواعد بيانات SQLite. في هذا الكود، تُستخدم sqlite3 لـ:

إنشاء ملف قاعدة البيانات.

إنشاء جدول لتخزين معلومات المدن.

إضافة بيانات المدن إلى الجدول.

حفظ التغييرات في قاعدة البيانات.

geopandas: هذه المكتبة مبنية على مكتبة pandas وتضيف دعمًا للبيانات الجغرافية. في هذا الكود، تُستخدم geopandas بشكل غير مباشر من خلال osmnx للتعامل مع البيانات المكانية مثل حدود الدول وأشكال المدن.

timezonefinder: هذه المكتبة تساعد في تحديد المنطقة الزمنية لموقع معين بناءً على خط الطول والعرض. في هذا الكود، تُستخدم timezonefinder للحصول على المنطقة الزمنية لكل مدينة.

pytz: هذه المكتبة توفر معلومات حول المناطق الزمنية حول العالم. على الرغم من أننا نستخدم timezonefinder بشكل أساسي، إلا أن pytz هي مكتبة أساسية للتعامل مع المناطق الزمنية في بايثون وقد تكون مطلوبة ضمنيًا بواسطة مكتبات أخرى.

باختصار، الكود يقوم بجمع معلومات جغرافية حول المدن العربية وحفظها في قاعدة بيانات منظمة يمكنك استخدامها لاحقًا في تطبيقاتك.